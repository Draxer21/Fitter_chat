version: "3.1"

stories:

- story: flujo enviar rutina por correo
  steps:
    - intent: enviar_rutina_correo
    - action: utter_pedir_contacto
    - intent: informar
    - action: utter_envio_rutina_correo

- story: flujo consultar reserva
  steps:
    - intent: consultar_reserva
    - action: utter_ask_codigo_reserva
    - intent: informar
    - action: action_consultar_reserva
    - action: utter_reserva_estado

- story: rutina con perfil completo
  steps:
    - intent: solicitar_rutina
    - action: action_fetch_profile
    - slot_was_set:
        - perfil_completo: true
    - action: utter_perfil_resumen
    - action: action_generar_rutina

- story: rutina con actualizacion guiada
  steps:
    - intent: solicitar_rutina
    - action: action_fetch_profile
    - slot_was_set:
        - perfil_completo: false
    - action: utter_perfil_incompleto
    - intent: actualizar_perfil_bot
    - action: profile_form
    - active_loop: profile_form
    - slot_was_set:
        - requested_slot: null
    - active_loop: null
    - action: action_submit_profile_form
    - action: utter_perfil_actualizado
    - intent: solicitar_rutina
    - action: action_fetch_profile
    - slot_was_set:
        - perfil_completo: true
    - action: action_generar_rutina

- story: dieta con perfil completo
  steps:
    - intent: solicitar_dieta
    - action: action_fetch_profile
    - slot_was_set:
        - perfil_completo: true
    - action: utter_perfil_resumen
    - action: action_generar_dieta

- story: dieta con actualizacion guiada
  steps:
    - intent: solicitar_dieta
    - action: action_fetch_profile
    - slot_was_set:
        - perfil_completo: false
    - action: utter_perfil_incompleto
    - intent: actualizar_perfil_bot
    - action: profile_form
    - active_loop: profile_form
    - slot_was_set:
        - requested_slot: null
    - active_loop: null
    - action: action_submit_profile_form
    - action: utter_perfil_actualizado
    - intent: solicitar_dieta
    - action: action_fetch_profile
    - slot_was_set:
        - perfil_completo: true
    - action: action_generar_dieta

- story: consultar perfil resumen
  steps:
    - intent: consultar_perfil
    - action: action_fetch_profile

- story: flujo soporte mfa
  steps:
    - intent: soporte_general
    - action: utter_soporte_opciones
    - intent: soporte_mfa
    - action: utter_soporte_mfa

- story: flujo completo profile_form
  steps:
    - intent: actualizar_perfil_bot
    - action: profile_form
    - active_loop: profile_form
    - slot_was_set:
        - requested_slot: peso
    - intent: informar
    - action: profile_form
    - slot_was_set:
        - peso: 75
    - slot_was_set:
        - requested_slot: altura
    - intent: informar
    - action: profile_form
    - slot_was_set:
        - altura: 180
    - slot_was_set:
        - requested_slot: objetivo_fitness
    - intent: informar
    - action: profile_form
    - slot_was_set:
        - objetivo_fitness: ganar masa
    - slot_was_set:
        - requested_slot: padecimientos
    - intent: informar
    - action: profile_form
    - slot_was_set:
        - padecimientos: ninguno
    - slot_was_set:
        - requested_slot: preferencia_dieta
    - intent: informar
    - action: profile_form
    - slot_was_set:
        - preferencia_dieta: sin lactosa
    - slot_was_set:
        - requested_slot: null
    - active_loop: null
    - action: action_submit_profile_form
    - action: utter_perfil_actualizado

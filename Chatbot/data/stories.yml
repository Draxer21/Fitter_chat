version: "3.1"

stories:

- story: flujo enviar rutina por correo
  steps:
    - intent: enviar_rutina_correo
    - action: utter_pedir_contacto
    - intent: informar
    - action: utter_envio_rutina_correo

- story: flujo consultar reserva
  steps:
    - intent: consultar_reserva
    - action: utter_ask_codigo_reserva
    - intent: informar
    - action: action_consultar_reserva
    - action: utter_reserva_estado

- story: rutina con profile_form
  steps:
    - intent: solicitar_rutina
    - slot_was_set:
        - requested_plan: rutina
    - action: action_fetch_profile
    - slot_was_set:
        - perfil_completo: false
    - action: utter_perfil_incompleto
    - action: profile_form
    - active_loop: profile_form
    - slot_was_set:
        - requested_slot: null
    - active_loop: null
    - action: action_submit_profile_form
    - action: utter_perfil_actualizado
    - action: action_generar_rutina

- story: dieta con profile_form
  steps:
    - intent: solicitar_dieta
    - slot_was_set:
        - requested_plan: dieta
    - action: action_fetch_profile
    - slot_was_set:
        - perfil_completo: false
    - action: utter_perfil_incompleto
    - action: profile_form
    - active_loop: profile_form
    - slot_was_set:
        - requested_slot: null
    - active_loop: null
    - action: action_submit_profile_form
    - action: utter_perfil_actualizado
    - action: action_generar_dieta

- story: dieta con preferencias sin palta
  steps:
    - intent: solicitar_dieta
      entities:
        - no_gusta: palta
    - slot_was_set:
        - requested_plan: dieta
    - slot_was_set:
        - no_gusta: palta
    - action: action_fetch_profile
    - slot_was_set:
        - perfil_completo: false
    - action: utter_perfil_incompleto
    - action: profile_form
    - active_loop: profile_form
    - slot_was_set:
        - requested_slot: null
    - active_loop: null
    - action: action_submit_profile_form
    - action: utter_perfil_actualizado
    - action: action_generar_dieta

- story: dieta con veto pepino
  steps:
    - intent: solicitar_dieta
      entities:
        - no_gusta: pepino
    - slot_was_set:
        - requested_plan: dieta
    - slot_was_set:
        - no_gusta: pepino
    - action: action_fetch_profile
    - slot_was_set:
        - perfil_completo: false
    - action: utter_perfil_incompleto
    - action: profile_form
    - active_loop: profile_form
    - slot_was_set:
        - requested_slot: null
    - active_loop: null
    - action: action_submit_profile_form
    - action: utter_perfil_actualizado
    - action: action_generar_dieta

- story: rutina con perfil completo
  steps:
    - intent: solicitar_rutina
    - slot_was_set:
        - requested_plan: rutina
    - action: action_fetch_profile
    - action: utter_mostrar_perfil
    - action: utter_perfil_resumen
    - slot_was_set:
        - perfil_completo: true
    - action: utter_perfil_resumen
    - action: action_generar_rutina

- story: dieta con perfil completo
  steps:
    - intent: solicitar_dieta
    - slot_was_set:
        - requested_plan: dieta
    - action: action_fetch_profile
    - slot_was_set:
        - perfil_completo: true
    - action: utter_perfil_resumen
    - action: action_generar_dieta

- story: consultar perfil resumen
  steps:
    - intent: consultar_perfil
    - action: action_fetch_profile
    - action: utter_mostrar_perfil
    - action: utter_perfil_resumen

- story: flujo soporte mfa
  steps:
    - intent: soporte_general
    - action: utter_soporte_opciones
    - intent: soporte_mfa
    - action: utter_soporte_mfa


- story: flujo entreno unico completo
  steps:
    - intent: solicitar_entreno_unico
    - action: hero_form
    - active_loop: hero_form
    - slot_was_set:
        - hero_programa: shonen
    - slot_was_set:
        - hero_inicio: proxima semana
    - slot_was_set:
        - hero_equipo: mancuernas y banda
    - active_loop: null
    - action: action_inscribir_entreno_unico

- story: flujo completo profile_form
  steps:
    - intent: actualizar_perfil_bot
    - action: profile_form
    - active_loop: profile_form
    - slot_was_set:
        - requested_slot: peso
    - intent: informar
    - action: profile_form
    - slot_was_set:
        - peso: 75
    - slot_was_set:
        - requested_slot: altura
    - intent: informar
    - action: profile_form
    - slot_was_set:
        - altura: 180
    - slot_was_set:
        - requested_slot: objetivo_fitness
    - intent: informar
    - action: profile_form
    - slot_was_set:
        - objetivo_fitness: ganar masa
    - slot_was_set:
        - requested_slot: padecimientos
    - intent: informar
    - action: profile_form
    - slot_was_set:
        - padecimientos: ninguno
    - slot_was_set:
        - requested_slot: preferencia_dieta
    - intent: informar
    - action: profile_form
    - slot_was_set:
        - preferencia_dieta: sin lactosa
    - slot_was_set:
        - requested_slot: musculo_preferido
    - intent: informar
    - action: profile_form
    - slot_was_set:
        - musculo_preferido: pecho
    - slot_was_set:
        - requested_slot: null
    - active_loop: null
    - action: action_submit_profile_form
    - action: utter_perfil_actualizado

- story: cambio plan suscripcion
  steps:
    - intent: suscripcion_cambio_plan
    - action: action_suscripcion_cambio_plan

- story: crear reserva completa
  steps:
    - intent: crear_reserva
    - action: reserva_form
    - active_loop: reserva_form
    - slot_was_set:
        - clase: spinning
    - slot_was_set:
        - fecha: "2025-10-05"
    - slot_was_set:
        - hora: "07:00"
    - active_loop: null
    - action: utter_confirmar_reserva
    - intent: afirmar
    - action: action_crear_reserva
    - action: utter_reserva_confirmada

"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[869],{869:(e,n,r)=>{r.r(n),r.d(n,{default:()=>a});var o=r(43),t=r(352),i=r(579);function a(){const{id:e}=(0,t.g)(),n=decodeURIComponent(String(e||"")),[r,a]=(0,o.useState)(!0),[d,u]=(0,o.useState)(null),[x,p]=(0,o.useState)(null),[f,h]=(0,o.useState)(!1),b=(0,o.useRef)(null);if((0,o.useEffect)(()=>{let e=!1;b.current&&b.current.abort();const r=new AbortController;return b.current=r,(async()=>{a(!0),p(null),h(!1);try{const o=await fetch("/chat/routine/".concat(encodeURIComponent(n)),{signal:r.signal});if(e)return;if(o.ok){const e=await o.json(),r=l(e)||c(n);u(r),h(!l(e))}else u(c(n)),h(!0)}catch(o){"AbortError"!==(null===o||void 0===o?void 0:o.name)&&(p("No se pudo obtener la rutina desde el backend."),u(c(n)),h(!0))}finally{e||a(!1)}})(),()=>{e=!0,r.abort()}},[n]),r)return(0,i.jsx)("main",{style:{padding:24},children:"Cargando rutina\u2026"});if(!d)return(0,i.jsx)("main",{style:{padding:24},children:"No se encontr\xf3 la rutina."});const{objetivo:g,musculo:m,nivel:j,ejercicios:y=[],notas:v}=d;return(0,i.jsxs)("main",{style:{padding:24,maxWidth:840,margin:"0 auto"},children:[(0,i.jsxs)("header",{style:{marginBottom:16},children:[(0,i.jsxs)("h1",{style:{fontSize:22,fontWeight:600},children:["Rutina: ",s(m)," \xb7 ",j]}),(0,i.jsxs)("p",{style:{color:"var(--muted)"},children:["Objetivo: ",(0,i.jsx)("strong",{children:g})]}),(0,i.jsxs)("p",{style:{color:"var(--muted)"},children:["ID: ",n]}),f&&(0,i.jsxs)("div",{role:"status",style:{marginTop:8,padding:"6px 10px",border:"1px solid #fde68a",background:"#fffbeb",color:"#92400e",borderRadius:8},children:["Mostrando rutina generada localmente (fallback). Cuando expongas",(0,i.jsx)("code",{children:" /chat/routine/:id"})," desde Flask, se cargar\xe1 la versi\xf3n del backend."]}),x&&(0,i.jsx)("div",{role:"alert",style:{marginTop:8,padding:"6px 10px",border:"1px solid #fecaca",background:"#fee2e2",color:"#991b1b",borderRadius:8},children:x})]}),(0,i.jsxs)("section",{style:{background:"#fafafa",padding:16,borderRadius:12,border:"1px solid #eee"},children:[(0,i.jsx)("h2",{style:{marginBottom:8,fontSize:18,fontWeight:600},children:"Bloques de ejercicio"}),(0,i.jsx)("ol",{style:{paddingLeft:18,lineHeight:1.7},children:y.map((e,n)=>(0,i.jsx)("li",{children:e},n))}),v&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{style:{marginTop:16,marginBottom:6,fontWeight:600},children:"Notas"}),(0,i.jsx)("p",{children:v})]})]}),(0,i.jsxs)("footer",{style:{marginTop:20,display:"flex",gap:8},children:[(0,i.jsx)(t.N_,{to:"/",style:{padding:"8px 12px",border:"1px solid #ccc",borderRadius:8,textDecoration:"none",color:"#111"},children:"Volver al chat"}),(0,i.jsx)("button",{onClick:()=>window.print(),style:{padding:"8px 12px",borderRadius:8,background:"#0d6efd",color:"white",border:"none",cursor:"pointer"},children:"Imprimir / Guardar PDF"})]})]})}function s(e){return e?e.slice(0,1).toUpperCase()+e.slice(1):""}function l(e){if(!e||"object"!==typeof e)return null;const n=d(e.objetivo,"general"),r=d(e.musculo,"fullbody"),o=d(e.nivel,"principiante"),t=Array.isArray(e.ejercicios)?e.ejercicios.filter(Boolean):[],i="string"===typeof e.notas&&e.notas.trim()?e.notas:void 0;return n&&r&&o?0===t.length?null:{objetivo:n,musculo:r,nivel:o,ejercicios:t,notas:i}:null}function d(e,n){return"string"===typeof e&&e.trim()?e.trim():n}function c(e){try{const n=String(e).split("-"),r=n.shift(),o=n.shift(),t=(r||"fullbody").toLowerCase(),i=(o||"principiante").toLowerCase(),a={pecho:["Press banca 4x8\u201310","Press inclinado mancuernas 3x10\u201312","Aperturas 3x12\u201315"],espalda:["Dominadas asistidas 4x6\u20138","Remo con barra 4x8\u201310","Jal\xf3n al pecho 3x10\u201312"],piernas:["Sentadilla 4x6\u20138","Prensa 3x10\u201312","Peso muerto rumano 3x8\u201310"],hombros:["Press militar 4x6\u20138","Elevaciones laterales 3x12\u201315","P\xe1jaros 3x12\u201315"],brazos:["Curl barra 4x8\u201310","Fondos 3x8\u201310","Curl martillo 3x10\u201312"],core:["Plancha 3x40\u201360s","Crunch 3x15\u201320","Elevaci\xf3n de piernas 3x12\u201315"],fullbody:["Sentadilla 3x8","Press banca 3x8","Remo 3x8","Peso muerto 3x5"]};return{id:e,objetivo:"general",musculo:t,nivel:i,ejercicios:a[t]||a.fullbody,notas:"Ajusta volumen e intensidad seg\xfan tolerancia. Hidr\xe1tate y cuida t\xe9cnica."}}catch(n){return null}}}}]);
//# sourceMappingURL=869.4614e48f.chunk.js.map
{"version":3,"file":"static/js/603.ebbcfd5b.chunk.js","mappings":"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","sources":["utils/formatPrice.js","pages/ProductoDetalle.jsx"],"sourcesContent":["const pesoFormatter = new Intl.NumberFormat(\"es-CL\", {\r\n  style: \"currency\",\r\n  currency: \"CLP\",\r\n  minimumFractionDigits: 0,\r\n  maximumFractionDigits: 0,\r\n});\r\n\r\nexport const formatearPrecio = (valor) => {\r\n  if (valor === null || valor === undefined) {\r\n    return pesoFormatter.format(0);\r\n  }\r\n\r\n  const numero = typeof valor === \"number\" ? valor : Number.parseFloat(valor);\r\n  if (!Number.isFinite(numero)) {\r\n    return pesoFormatter.format(0);\r\n  }\r\n\r\n  const normalizado = Math.round(numero);\r\n  return pesoFormatter.format(normalizado);\r\n};\r\n\r\nexport const formatPrice = formatearPrecio;\r\n","import { useEffect, useMemo, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { API } from \"../services/apijs\";\r\nimport \"../styles/product-detail.css\";\r\nimport { formatearPrecio } from \"../utils/formatPrice\";\r\nimport { useCart } from \"../contexts/CartContext\";\r\n\r\nconst stockDisponible = (valor) => {\r\n  const n = Number(valor);\r\n  return Number.isFinite(n) ? n : 0;\r\n};\r\n\r\nexport default function ProductoDetalle() {\r\n  const { id } = useParams();\r\n  const [p, setP] = useState(null);\r\n  const [err, setErr] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [related, setRelated] = useState([]);\r\n  const [relatedError, setRelatedError] = useState(\"\");\r\n  const [showFullDescription, setShowFullDescription] = useState(false);\r\n  const [selectedImageIndex, setSelectedImageIndex] = useState(0);\r\n  const { addItem } = useCart();\r\n\r\n  useEffect(() => {\r\n    setSelectedImageIndex(0);\r\n    let active = true;\r\n    setLoading(true);\r\n    API.productos\r\n      .get(id)\r\n      .then((data) => {\r\n        if (!active) return;\r\n        setP(data);\r\n        setErr(\"\");\r\n      })\r\n      .catch((e) => {\r\n        if (!active) return;\r\n        setErr(e.message);\r\n      })\r\n      .finally(() => {\r\n        if (!active) return;\r\n        setLoading(false);\r\n      });\r\n    return () => {\r\n      active = false;\r\n    };\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    if (!p) {\r\n      setRelated([]);\r\n      return;\r\n    }\r\n    let active = true;\r\n    API.productos\r\n      .list(\"\")\r\n      .then((data) => {\r\n        if (!active) return;\r\n        const items = Array.isArray(data) ? data : [];\r\n        const filtered = items\r\n          .filter((item) => item.id !== p.id)\r\n          .filter((item) => !p.categoria || item.categoria === p.categoria)\r\n          .slice(0, 8);\r\n        setRelated(filtered);\r\n        setRelatedError(\"\");\r\n      })\r\n      .catch((e) => {\r\n        if (!active) return;\r\n        setRelated([]);\r\n        setRelatedError(e.message || \"No se pudieron cargar productos relacionados.\");\r\n      });\r\n    return () => {\r\n      active = false;\r\n    };\r\n  }, [p]);\r\n\r\n  const add = async () => {\r\n    if (!p) return;\r\n    try {\r\n      await addItem(p.id);\r\n    } catch (e) {\r\n      alert(e.message);\r\n    }\r\n  };\r\n\r\n  const addRelated = async (productId) => {\r\n    try {\r\n      await addItem(productId);\r\n    } catch (e) {\r\n      alert(e.message);\r\n    }\r\n  };\r\n\r\n  const disponible = stockDisponible(p?.stock);\r\n  const sinStock = disponible <= 0;\r\n  const imageSrc = p?.imagen_url || \"/fitter_logo.png\";\r\n\r\n  const galleryImages = useMemo(() => {\r\n    if (Array.isArray(p?.gallery) && p.gallery.length > 0) {\r\n      return p.gallery;\r\n    }\r\n    return [imageSrc];\r\n  }, [p, imageSrc]);\r\n\r\n  const shortDescription = useMemo(() => {\r\n    const descripcion = p?.descripcion;\r\n    if (!descripcion) return \"Sin descripción adicional.\";\r\n    if (showFullDescription || descripcion.length < 320) {\r\n      return descripcion;\r\n    }\r\n    return `${descripcion.slice(0, 320)}…`;\r\n  }, [p, showFullDescription]);\r\n\r\n  const specifications = useMemo(() => {\r\n    const rows = [];\r\n    rows.push({ label: \"Categoría\", value: p?.categoria || \"—\" });\r\n    rows.push({ label: \"Código\", value: p ? `#${p.id}` : \"—\" });\r\n    rows.push({ label: \"Disponibilidad\", value: disponible > 0 ? `${disponible} unidades` : \"Sin stock\" });\r\n    rows.push({ label: \"Precio\", value: formatearPrecio(p?.precio || 0) });\r\n    if (p?.brand) {\r\n      rows.unshift({ label: \"Marca\", value: p.brand });\r\n    }\r\n    if (Array.isArray(p?.specifications)) {\r\n      p.specifications.forEach((row) => {\r\n        if (row && row.label) {\r\n          rows.push({\r\n            label: row.label,\r\n            value: row.value ?? row.descripcion ?? row.detail ?? \"—\",\r\n          });\r\n        }\r\n      });\r\n    }\r\n    return rows;\r\n  }, [p, disponible]);\r\n\r\n  if (err) {\r\n    return (\r\n      <main className=\"product-detail-page\">\r\n        <div className=\"container text-danger py-5\">Error: {err}</div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  if (loading || !p) {\r\n    return (\r\n      <main className=\"product-detail-page\">\r\n        <div className=\"container py-5\">Cargando…</div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"product-detail-page\">\r\n      <div className=\"container\">\r\n        <nav className=\"product-breadcrumb\">\r\n          <Link to=\"/\">Inicio</Link>\r\n          {p.categoria && (\r\n            <>\r\n              <span>/</span>\r\n              <Link to={`/catalogo?categoria=${encodeURIComponent(p.categoria)}`}>{p.categoria}</Link>\r\n            </>\r\n          )}\r\n          <span>/</span>\r\n          <span className=\"product-breadcrumb__current\">{p.nombre}</span>\r\n        </nav>\r\n\r\n        <div className=\"product-detail-grid\">\r\n          <section className=\"product-gallery\">\r\n            <div className=\"product-gallery__main\">\r\n              <img src={galleryImages[selectedImageIndex] || imageSrc} alt={p.nombre} />\r\n            </div>\r\n            {galleryImages.length > 1 && (\r\n              <div className=\"product-gallery__thumbnails\">\r\n                {galleryImages.map((img, index) => (\r\n                  <button\r\n                    key={img || index}\r\n                    type=\"button\"\r\n                    className={`product-gallery__thumb ${index === selectedImageIndex ? \"product-gallery__thumb--active\" : \"\"}`}\r\n                    onClick={() => setSelectedImageIndex(index)}\r\n                  >\r\n                    <img src={img} alt={`${p.nombre} vista ${index + 1}`} />\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </section>\r\n\r\n          <section className=\"product-summary\">\r\n            <small className=\"product-summary__brand\">{p.brand || p.categoria || \"Producto Fitter\"}</small>\r\n            <h1>{p.nombre}</h1>\r\n            {p.rating && (\r\n              <div className=\"product-summary__rating\">\r\n                <span className=\"product-summary__rating-stars\">\r\n                  {\"★\".repeat(Math.round(p.rating))}\r\n                  {p.rating < 5 ? \"☆\".repeat(5 - Math.round(p.rating)) : \"\"}\r\n                </span>\r\n                <span>{Number(p.rating).toFixed(1)} / 5</span>\r\n                {p.rating_count ? <span className=\"text-muted\">({p.rating_count} opiniones)</span> : null}\r\n              </div>\r\n            )}\r\n            <div className=\"product-summary__price\">\r\n              <span className=\"product-summary__amount\">{formatearPrecio(p.precio)}</span>\r\n              <span className={`product-summary__stock ${sinStock ? \"product-summary__stock--empty\" : \"\"}`}>\r\n                {sinStock ? \"Sin stock disponible\" : `${disponible} unidades listas para envío`}\r\n              </span>\r\n            </div>\r\n            <p className=\"product-summary__description\">{shortDescription}</p>\r\n            {p.descripcion && p.descripcion.length > 320 && (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-link p-0\"\r\n                onClick={() => setShowFullDescription((prev) => !prev)}\r\n              >\r\n                {showFullDescription ? \"Ver menos\" : \"Ver descripción completa\"}\r\n              </button>\r\n            )}\r\n            {Array.isArray(p.highlights) && p.highlights.length > 0 && (\r\n              <ul className=\"product-summary__highlights\">\r\n                {p.highlights.map((highlight, index) => (\r\n                  <li key={index}>{highlight}</li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n\r\n            <div className=\"product-summary__actions\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-dark btn-lg\"\r\n                disabled={sinStock}\r\n                onClick={() => {\r\n                  if (!sinStock) add();\r\n                }}\r\n              >\r\n                {sinStock ? \"No disponible\" : \"Agregar al carrito\"}\r\n              </button>\r\n              <Link to=\"/carrito\" className=\"btn btn-outline-secondary btn-lg\">\r\n                Ir al carrito\r\n              </Link>\r\n            </div>\r\n\r\n            <div className=\"product-summary__info\">\r\n              <div>\r\n                <strong>Entrega rápida</strong>\r\n                <p className=\"text-muted mb-0\">Disponibilidad inmediata para retiro o envío.</p>\r\n              </div>\r\n              <div>\r\n                <strong>Pago seguro</strong>\r\n                <p className=\"text-muted mb-0\">Protegemos tus datos con métodos de pago seguros.</p>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        <section className=\"product-details\">\r\n          <div className=\"product-specs\">\r\n            <h2>Especificaciones</h2>\r\n            <dl>\r\n              {specifications.map((spec) => (\r\n                <div key={spec.label} className=\"product-specs__row\">\r\n                  <dt>{spec.label}</dt>\r\n                  <dd>{spec.value}</dd>\r\n                </div>\r\n              ))}\r\n            </dl>\r\n          </div>\r\n          <div className=\"product-description\">\r\n            <h2>Información adicional</h2>\r\n            <p>{p.descripcion || \"No se proporcionó información adicional para este producto.\"}</p>\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"product-related\">\r\n          <header className=\"d-flex justify-content-between align-items-center mb-3\">\r\n            <h3>Tal vez te interese</h3>\r\n            <Link to=\"/catalogo\" className=\"btn btn-link\">Ver todo el catálogo</Link>\r\n          </header>\r\n          {relatedError && <div className=\"alert alert-warning\">{relatedError}</div>}\r\n          {!relatedError && related.length === 0 && (\r\n            <p className=\"text-muted\">No encontramos productos similares por ahora.</p>\r\n          )}\r\n          <div className=\"product-related__grid\">\r\n            {related.map((item) => {\r\n              const stock = stockDisponible(item.stock);\r\n              return (\r\n                <article key={item.id} className=\"product-related__card\">\r\n                  <Link to={`/producto/${item.id}`}>\r\n                    <img src={item.imagen_url || \"/fitter_logo.png\"} alt={item.nombre} />\r\n                    <h4>{item.nombre}</h4>\r\n                  </Link>\r\n                  <span className=\"product-related__price\">{formatearPrecio(item.precio)}</span>\r\n                  <span className=\"product-related__stock\">\r\n                    {stock > 0 ? `${stock} disponibles` : \"Sin stock\"}\r\n                  </span>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-dark btn-sm\"\r\n                    disabled={stock <= 0}\r\n                    onClick={() => addRelated(item.id)}\r\n                  >\r\n                    Añadir\r\n                  </button>\r\n                </article>\r\n              );\r\n            })}\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":["pesoFormatter","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","formatearPrecio","valor","undefined","format","numero","Number","parseFloat","isFinite","normalizado","Math","round","stockDisponible","n","ProductoDetalle","id","useParams","p","setP","useState","err","setErr","loading","setLoading","related","setRelated","relatedError","setRelatedError","showFullDescription","setShowFullDescription","selectedImageIndex","setSelectedImageIndex","addItem","useCart","useEffect","active","API","productos","get","then","data","catch","e","message","finally","list","filtered","Array","isArray","filter","item","categoria","slice","disponible","stock","sinStock","imageSrc","imagen_url","galleryImages","useMemo","gallery","length","shortDescription","descripcion","concat","specifications","rows","push","label","value","precio","brand","unshift","forEach","row","_ref","_ref2","_row$value","detail","_jsx","className","children","_jsxs","Link","to","_Fragment","encodeURIComponent","nombre","src","alt","map","img","index","type","onClick","rating","repeat","toFixed","rating_count","prev","highlights","highlight","disabled","async","alert","add","spec","productId","addRelated"],"sourceRoot":""}
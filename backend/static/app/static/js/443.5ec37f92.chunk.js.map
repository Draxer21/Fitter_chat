{"version":3,"file":"static/js/443.5ec37f92.chunk.js","mappings":"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","sources":["utils/formatPrice.js","components/HomeHero.jsx","components/Memberships.jsx","pages/HomePage.jsx"],"sourcesContent":["const pesoFormatter = new Intl.NumberFormat(\"es-CL\", {\r\n  style: \"currency\",\r\n  currency: \"CLP\",\r\n  minimumFractionDigits: 0,\r\n  maximumFractionDigits: 0,\r\n});\r\n\r\nexport const formatearPrecio = (valor) => {\r\n  if (valor === null || valor === undefined) {\r\n    return pesoFormatter.format(0);\r\n  }\r\n\r\n  const numero = typeof valor === \"number\" ? valor : Number.parseFloat(valor);\r\n  if (!Number.isFinite(numero)) {\r\n    return pesoFormatter.format(0);\r\n  }\r\n\r\n  const normalizado = Math.round(numero);\r\n  return pesoFormatter.format(normalizado);\r\n};\r\n\r\nexport const formatPrice = formatearPrecio;\r\n","import React from 'react';\r\nimport '../styles/hero.css';\r\nimport { useLocale } from '../contexts/LocaleContext';\r\n\r\nexport default function HomeHero() {\r\n  const { t } = useLocale();\r\n\r\n  const style = {\r\n    backgroundImage: \"linear-gradient(rgba(0,0,0,0.45), rgba(0,0,0,0.45)), url('/proyecto.jpg')\",\r\n    backgroundSize: 'cover',\r\n    backgroundPosition: 'center center',\r\n  };\r\n\r\n  return (\r\n    <header className=\"home-hero\" style={style} role=\"banner\" aria-label=\"Página principal\">\r\n      <div className=\"hero-overlay\" aria-hidden=\"true\" />\r\n      <div className=\"hero-inner\">\r\n        <div className=\"hero-content\">\r\n          <h1 className=\"hero-title\">\r\n            <span className=\"muted\">{t('home.hero.title.muted')}</span>{' '}\r\n            <span className=\"highlight\">{t('home.hero.title.highlight')}</span>\r\n          </h1>\r\n          <h2 className=\"hero-sub\">\r\n            {t('home.hero.subtitle.prefix')}{' '}\r\n            <strong>{t('home.hero.subtitle.strong')}</strong>\r\n          </h2>\r\n          <p className=\"hero-desc\">{t('home.hero.description')}</p>\r\n          <div className=\"hero-cta\">\r\n            <a className=\"btn btn-outline-dark btn-lg\" href=\"/registro\" aria-label=\"Registrarse en Fitter\">\r\n              {t('home.hero.cta')}\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <section className=\"hero-features container\" role=\"region\" aria-label=\"Características principales\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-3 feature\">\r\n            <h5>{t('home.hero.feature.training.title')}</h5>\r\n            <p>{t('home.hero.feature.training.desc')}</p>\r\n          </div>\r\n          <div className=\"col-md-3 feature\">\r\n            <h5>{t('home.hero.feature.ai.title')}</h5>\r\n            <p>{t('home.hero.feature.ai.desc')}</p>\r\n          </div>\r\n          <div className=\"col-md-3 feature\">\r\n            <h5>{t('home.hero.feature.gym.title')}</h5>\r\n            <p>{t('home.hero.feature.gym.desc')}</p>\r\n          </div>\r\n          <div className=\"col-md-3 feature\">\r\n            <h5>{t('home.hero.feature.community.title')}</h5>\r\n            <p>{t('home.hero.feature.community.desc')}</p>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </header>\r\n  );\r\n}\r\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport { useLocale } from '../contexts/LocaleContext';\r\nimport { useCart } from '../contexts/CartContext';\r\nimport { API } from '../services/apijs';\r\nimport { formatearPrecio } from '../utils/formatPrice';\r\n\r\nconst PLANS = [\r\n  {\r\n    id: 'basic',\r\n    nameKey: 'memberships.plans.basic.name',\r\n    price: '$29.990',\r\n    periodKey: 'memberships.period.perMonth',\r\n    featureKeys: [\r\n      'memberships.plans.basic.feature.1',\r\n      'memberships.plans.basic.feature.2',\r\n      'memberships.plans.basic.feature.3',\r\n      'memberships.plans.basic.feature.4',\r\n    ],\r\n  },\r\n  {\r\n    id: 'premium',\r\n    nameKey: 'memberships.plans.premium.name',\r\n    price: '$49.990',\r\n    periodKey: 'memberships.period.perMonth',\r\n    featureKeys: [\r\n      'memberships.plans.premium.feature.1',\r\n      'memberships.plans.premium.feature.2',\r\n      'memberships.plans.premium.feature.3',\r\n      'memberships.plans.premium.feature.4',\r\n      'memberships.plans.premium.feature.5',\r\n    ],\r\n  },\r\n  {\r\n    id: 'black',\r\n    nameKey: 'memberships.plans.black.name',\r\n    price: '$69.990',\r\n    periodKey: 'memberships.period.perMonth',\r\n    featureKeys: [\r\n      'memberships.plans.black.feature.1',\r\n      'memberships.plans.black.feature.2',\r\n      'memberships.plans.black.feature.3',\r\n      'memberships.plans.black.feature.4',\r\n      'memberships.plans.black.feature.5',\r\n    ],\r\n  },\r\n];\r\n\r\nexport default function Memberships() {\r\n  const { t } = useLocale();\r\n  const { addItem } = useCart();\r\n  const [membershipProducts, setMembershipProducts] = useState([]);\r\n  const [loadError, setLoadError] = useState('');\r\n\r\n  useEffect(() => {\r\n    let active = true;\r\n    API.productos\r\n      .list('?categoria=Membership')\r\n      .then((data) => {\r\n        if (!active) return;\r\n        setMembershipProducts(Array.isArray(data) ? data : []);\r\n        setLoadError('');\r\n      })\r\n      .catch((err) => {\r\n        if (!active) return;\r\n        setMembershipProducts([]);\r\n        setLoadError(err?.message || 'No se pudieron cargar las membresías disponibles.');\r\n      });\r\n    return () => {\r\n      active = false;\r\n    };\r\n  }, []);\r\n\r\n  const resolveProductForPlan = useCallback(\r\n    (plan, index) => {\r\n      if (!membershipProducts.length) {\r\n        return null;\r\n      }\r\n      const normalizedId = plan.id.toLowerCase();\r\n      const byName = membershipProducts.find((product) => {\r\n        const name = (product.nombre || '').toLowerCase();\r\n        return name.includes(normalizedId);\r\n      });\r\n      if (byName) {\r\n        return byName;\r\n      }\r\n      return membershipProducts[index] || membershipProducts[0];\r\n    },\r\n    [membershipProducts]\r\n  );\r\n\r\n  const displayPlans = useMemo(\r\n    () =>\r\n      PLANS.map((plan, index) => {\r\n        const product = resolveProductForPlan(plan, index);\r\n        return {\r\n          ...plan,\r\n          product,\r\n          displayPrice:\r\n            product && product.precio !== undefined && product.precio !== null\r\n              ? formatearPrecio(product.precio)\r\n              : plan.price,\r\n        };\r\n      }),\r\n    [resolveProductForPlan]\r\n  );\r\n\r\n  const handleAddPlan = async (plan) => {\r\n    try {\r\n      const product = plan.product;\r\n      if (!product) {\r\n        throw new Error(\r\n          'No encontramos un producto asociado a esta membresía. Revisa el catálogo de productos de categoría \"Membership\".'\r\n        );\r\n      }\r\n      await addItem(product.id);\r\n    } catch (err) {\r\n      alert(err?.message || \"No pudimos agregar el plan al carrito.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"container py-5\">\r\n      <h2 className=\"text-center mb-5\">{t('memberships.title')}</h2>\r\n      {loadError && <div className=\"alert alert-warning text-center\">{loadError}</div>}\r\n      <div className=\"row\">\r\n        {displayPlans.map((plan, index) => (\r\n          <div key={plan.id} className=\"col-md-4 mb-4\">\r\n            <div className=\"card h-100 shadow-sm\">\r\n              <div className=\"card-body text-center\">\r\n                <h5 className=\"card-title\">{t(plan.nameKey)}</h5>\r\n                <h3 className=\"text-primary\">\r\n                  {plan.displayPrice}\r\n                  <small className=\"text-muted\">{t(plan.periodKey)}</small>\r\n                </h3>\r\n                <ul className=\"list-unstyled mt-3\">\r\n                  {plan.featureKeys.map((featureKey) => (\r\n                    <li key={featureKey} className=\"mb-2\">\r\n                      <i className=\"fas fa-check text-success me-2\"></i>\r\n                      {t(featureKey)}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n                <button\r\n                  className=\"btn btn-primary btn-lg mt-3\"\r\n                  onClick={() => handleAddPlan(plan)}\r\n                >\r\n                  {t('memberships.selectPlan')}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","import { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useLocation, Link } from \"react-router-dom\";\r\nimport { API } from \"../services/apijs\";\r\nimport \"../styles/legacy/producto/style_index.css\";\r\nimport HomeHero from \"../components/HomeHero\";\r\nimport Memberships from \"../components/Memberships\";\r\nimport Logo from \"../components/Logo\";\r\nimport { formatearPrecio } from \"../utils/formatPrice\";\r\nimport { useLocale } from \"../contexts/LocaleContext\";\r\nimport { useCart } from \"../contexts/CartContext\";\r\n\r\nconst stockDisponible = (valor) => {\r\n  const n = Number(valor);\r\n  return Number.isFinite(n) ? n : 0;\r\n};\r\n\r\nexport default function HomePage() {\r\n  const { search, hash } = useLocation();\r\n  const categoria = useMemo(() => new URLSearchParams(search).get(\"categoria\") || \"\", [search]);\r\n  const { t } = useLocale();\r\n  const { addItem } = useCart();\r\n\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [err, setErr] = useState(\"\");\r\n  const [canScrollLeft, setCanScrollLeft] = useState(false);\r\n  const [canScrollRight, setCanScrollRight] = useState(false);\r\n  const listRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const q = categoria ? `?categoria=${encodeURIComponent(categoria)}` : \"\";\r\n    API.productos\r\n      .list(q)\r\n      .then((data) => {\r\n        if (Array.isArray(data)) {\r\n          setItems(data);\r\n        } else if (Array.isArray(data?.items)) {\r\n          setItems(data.items);\r\n        } else {\r\n          setItems([]);\r\n        }\r\n        setErr(\"\");\r\n      })\r\n      .catch((e) => {\r\n        setErr(e?.message || \"No se pudieron cargar los productos.\");\r\n        setItems([]);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, [categoria]);\r\n\r\n  const add = async (id) => {\r\n    try {\r\n      await addItem(id);\r\n    } catch (e) {\r\n      alert(e.message);\r\n    }\r\n  };\r\n\r\n  const updateScrollIndicators = () => {\r\n    const node = listRef.current;\r\n    if (!node) {\r\n      setCanScrollLeft(false);\r\n      setCanScrollRight(false);\r\n      return;\r\n    }\r\n    const maxScrollLeft = node.scrollWidth - node.clientWidth;\r\n    setCanScrollLeft(node.scrollLeft > 4);\r\n    setCanScrollRight(maxScrollLeft - node.scrollLeft > 4);\r\n  };\r\n\r\n  const scrollProducts = (direction) => {\r\n    const node = listRef.current;\r\n    if (!node) return;\r\n    const firstCard = node.querySelector(\".producto\");\r\n    const styles = typeof window !== \"undefined\" ? window.getComputedStyle(node) : null;\r\n    const gap = styles ? parseFloat(styles.columnGap || styles.gap || \"12\") : 12;\r\n    const cardWidth = firstCard ? firstCard.getBoundingClientRect().width + gap : node.clientWidth;\r\n    node.scrollBy({ left: direction * cardWidth, behavior: \"smooth\" });\r\n    if (typeof window !== \"undefined\") {\r\n      window.requestAnimationFrame(() => {\r\n        setTimeout(updateScrollIndicators, 200);\r\n      });\r\n    } else {\r\n      setTimeout(updateScrollIndicators, 200);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const node = listRef.current;\r\n    if (node) {\r\n      node.scrollTo({ left: 0 });\r\n    }\r\n    updateScrollIndicators();\r\n    if (!node) return;\r\n\r\n    const handle = () => updateScrollIndicators();\r\n    node.addEventListener(\"scroll\", handle, { passive: true });\r\n\r\n    let observer;\r\n    if (typeof ResizeObserver !== \"undefined\") {\r\n      observer = new ResizeObserver(handle);\r\n      observer.observe(node);\r\n    }\r\n\r\n    return () => {\r\n      node.removeEventListener(\"scroll\", handle);\r\n      if (observer) observer.disconnect();\r\n    };\r\n  }, [items.length, categoria]);\r\n\r\n  useEffect(() => {\r\n    if (!loading && hash === \"#offers\") {\r\n      const target = document.getElementById(\"offers\");\r\n      if (target) {\r\n        target.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\r\n      }\r\n    }\r\n  }, [loading, hash]);\r\n\r\n  return (\r\n    <main className=\"flex-grow-1\">\r\n      <HomeHero />\r\n\r\n      <section id=\"offers\" className=\"home-offers-section py-5\">\r\n        <div className=\"container text-center\">\r\n          <h2 style={{ margin: \"20px 0 30px 0\" }}>\r\n            {t(\"home.offers.title\")}\r\n            {categoria ? ` ${t(\"home.offers.in\")} ${categoria}` : \"\"}\r\n          </h2>\r\n          {loading && <p className=\"offers-status\" role=\"status\" aria-live=\"polite\">{t(\"home.offers.loading\")}</p>}\r\n          {err && <p className=\"offers-status text-danger\" role=\"alert\" aria-live=\"assertive\">{t(\"home.offers.errorPrefix\")} {err}</p>}\r\n          {!loading && items.length === 0 && !err && (\r\n            <p className=\"offers-status\" role=\"status\" aria-live=\"polite\">{t(\"home.offers.empty\")}</p>\r\n          )}\r\n        </div>\r\n\r\n        <div\r\n          className={[\r\n            \"productos-scroll-wrapper\",\r\n            canScrollLeft ? \"productos-scroll-wrapper--show-left\" : \"\",\r\n            canScrollRight ? \"productos-scroll-wrapper--show-right\" : \"\"\r\n          ].filter(Boolean).join(\" \")}\r\n        >\r\n          {canScrollLeft && (\r\n            <button\r\n              type=\"button\"\r\n              className=\"productos-scroll-btn productos-scroll-btn--left\"\r\n              onClick={() => scrollProducts(-1)}\r\n              onKeyDown={(e) => (e.key === \"Enter\" || e.key === \" \") && scrollProducts(-1)}\r\n              aria-label=\"Ver productos anteriores\"\r\n            >\r\n              {\"<\"}\r\n            </button>\r\n          )}\r\n\r\n          <div ref={listRef} className=\"productos productos-scroll\">\r\n            {items.map((p) => {\r\n              const disponible = stockDisponible(p.stock);\r\n              const sinStock = disponible <= 0;\r\n              const imageSrc = p.imagen_url || \"/fitter_logo.png\";\r\n              return (\r\n                <div key={p.id} className=\"producto\">\r\n                  <Link to={`/producto/${p.id}`}>\r\n                    <Logo src={imageSrc} alt={p.nombre} className=\"producto__imagen\" />\r\n                    <h4>{p.nombre}</h4>\r\n                    <p>{t(\"home.offers.categoryLabel\")}: {p.categoria || \"-\"}</p>\r\n                    <p>{t(\"home.offers.availabilityLabel\")}: {disponible}</p>\r\n                    <p>{t(\"home.offers.priceLabel\")}: {formatearPrecio(p.precio)}</p>\r\n                  </Link>\r\n                  <button\r\n                    className=\"btn btn-primary\"\r\n                    disabled={sinStock}\r\n                    onClick={() => {\r\n                      if (sinStock) return;\r\n                      add(p.id);\r\n                    }}\r\n                  >\r\n                    {sinStock ? t(\"home.offers.button.outOfStock\") : t(\"home.offers.button.addToCart\")}\r\n                  </button>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {canScrollRight && (\r\n            <button\r\n              type=\"button\"\r\n              className=\"productos-scroll-btn productos-scroll-btn--right\"\r\n              onClick={() => scrollProducts(1)}\r\n              onKeyDown={(e) => (e.key === \"Enter\" || e.key === \" \") && scrollProducts(1)}\r\n              aria-label=\"Ver mas productos\"\r\n            >\r\n              {\">\"}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </section>\r\n\r\n      <Memberships />\r\n    </main>\r\n  );\r\n}\r\n"],"names":["pesoFormatter","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","formatearPrecio","valor","undefined","format","numero","Number","parseFloat","isFinite","normalizado","Math","round","HomeHero","t","useLocale","_jsxs","className","backgroundImage","backgroundSize","backgroundPosition","role","children","_jsx","href","PLANS","id","nameKey","price","periodKey","featureKeys","Memberships","addItem","useCart","membershipProducts","setMembershipProducts","useState","loadError","setLoadError","useEffect","active","API","productos","list","then","data","Array","isArray","catch","err","message","resolveProductForPlan","useCallback","plan","index","length","normalizedId","toLowerCase","byName","find","product","nombre","includes","displayPlans","useMemo","map","_objectSpread","displayPrice","precio","featureKey","onClick","async","Error","alert","handleAddPlan","stockDisponible","n","HomePage","search","hash","useLocation","categoria","URLSearchParams","get","items","setItems","loading","setLoading","setErr","canScrollLeft","setCanScrollLeft","canScrollRight","setCanScrollRight","listRef","useRef","q","concat","encodeURIComponent","e","finally","updateScrollIndicators","node","current","maxScrollLeft","scrollWidth","clientWidth","scrollLeft","scrollProducts","direction","firstCard","querySelector","styles","window","getComputedStyle","gap","columnGap","cardWidth","getBoundingClientRect","width","scrollBy","left","behavior","requestAnimationFrame","setTimeout","scrollTo","handle","observer","addEventListener","passive","ResizeObserver","observe","removeEventListener","disconnect","target","document","getElementById","scrollIntoView","block","margin","filter","Boolean","join","type","onKeyDown","key","ref","p","disponible","stock","sinStock","imageSrc","imagen_url","Link","to","Logo","src","alt","disabled","add"],"sourceRoot":""}
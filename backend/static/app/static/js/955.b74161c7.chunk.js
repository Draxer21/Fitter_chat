"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[955],{955:(e,l,a)=>{a.r(l),a.d(l,{default:()=>p});var s=a(555),i=a(43),r=a(352),t=a(528),o=a(964),n=a(579);const c={weight_kg:"",height_cm:"",age_years:"",sex:"",activity_level:"",primary_goal:"",allergies:"",medical_conditions:"",notes:""},d=[{value:"",labelKey:"profile.sex.select"},{value:"female",labelKey:"profile.sex.female"},{value:"male",labelKey:"profile.sex.male"},{value:"other",labelKey:"profile.sex.other"}],m=[{value:"sedentario",labelKey:"profile.activity.sedentario"},{value:"ligero",labelKey:"profile.activity.ligero"},{value:"moderado",labelKey:"profile.activity.moderado"},{value:"intenso",labelKey:"profile.activity.intenso"},{value:"atleta",labelKey:"profile.activity.atleta"}],h=[{value:"perder_grasa",labelKey:"profile.goal.perder_grasa"},{value:"mantener",labelKey:"profile.goal.mantener"},{value:"ganar_masa",labelKey:"profile.goal.ganar_masa"},{value:"rendimiento",labelKey:"profile.goal.rendimiento"}];function f(e){var l,a,i,r,t,o,n,d,m;return e?{weight_kg:null!==(l=e.weight_kg)&&void 0!==l?l:"",height_cm:null!==(a=e.height_cm)&&void 0!==a?a:"",age_years:null!==(i=e.age_years)&&void 0!==i?i:"",sex:null!==(r=e.sex)&&void 0!==r?r:"",activity_level:null!==(t=e.activity_level)&&void 0!==t?t:"",primary_goal:null!==(o=e.primary_goal)&&void 0!==o?o:"",allergies:null!==(n=e.allergies)&&void 0!==n?n:"",medical_conditions:null!==(d=e.medical_conditions)&&void 0!==d?d:"",notes:null!==(m=e.notes)&&void 0!==m?m:""}:(0,s.A)({},c)}function p(){const{t:e}=(0,o.Ym)(),{isAuthenticated:l,profile:a,profileState:c,loadProfile:p,updateProfile:g}=(0,t.A)(),[v,u]=(0,i.useState)(()=>f(a)),[x,b]=(0,i.useState)("idle"),[j,y]=(0,i.useState)(""),[N,_]=(0,i.useState)("");(0,i.useEffect)(()=>{l&&p().catch(()=>{})},[l,p]),(0,i.useEffect)(()=>{u(f(a))},[a]);const w=(0,i.useMemo)(()=>{const e=parseFloat(v.weight_kg),l=parseFloat(v.height_cm);if(!e||!l)return null;if(l<=0)return null;const a=l/100,s=e/(a*a);return Number.isFinite(s)?Math.round(100*s)/100:null},[v.weight_kg,v.height_cm]),K=e=>{const{name:l,value:a}=e.target;u(e=>(0,s.A)((0,s.A)({},e),{},{[l]:a}))};return l?(0,n.jsx)("main",{className:"profile-page container py-5",children:(0,n.jsx)("div",{className:"row justify-content-center",children:(0,n.jsxs)("div",{className:"col-xl-9 col-lg-10",children:[(0,n.jsxs)("header",{className:"profile-header text-center mb-4",children:[(0,n.jsx)("p",{className:"profile-eyebrow",children:e("profile.highlight.eyebrow")}),(0,n.jsx)("h1",{className:"profile-title",children:e("profile.title")}),(0,n.jsx)("p",{className:"profile-subtitle",children:e("profile.subtitle")})]}),(0,n.jsxs)("div",{className:"profile-highlight shadow-sm mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"profile-highlight-title",children:e("profile.highlight.title")}),(0,n.jsx)("p",{className:"mb-0",children:e("profile.highlight.subtitle")})]}),(0,n.jsx)("div",{className:"profile-highlight-icon","aria-hidden":"true",children:(0,n.jsx)("span",{className:"bi bi-activity"})})]}),j&&(0,n.jsx)("div",{className:"alert alert-success",children:j}),N&&(0,n.jsx)("div",{className:"alert alert-danger",children:N}),c.error&&!N&&(0,n.jsx)("div",{className:"alert alert-danger",children:c.error.message||e("profile.alerts.loadError")}),(0,n.jsxs)("form",{className:"profile-form card shadow-sm border-0",onSubmit:async a=>{if(a.preventDefault(),l){b("saving"),y(""),_("");try{const l={};Object.entries(v).forEach(e=>{let[a,s]=e;l[a]=""===s?null:s}),await g(l),y(e("profile.alerts.success"))}catch(s){_((null===s||void 0===s?void 0:s.message)||e("profile.alerts.error"))}finally{b("idle")}}else _("Inicia sesi\xf3n para actualizar tu perfil.")},children:[(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsxs)("div",{className:"row g-3",children:[(0,n.jsxs)("div",{className:"col-md-4",children:[(0,n.jsx)("label",{htmlFor:"weight_kg",className:"form-label",children:e("profile.fields.weight")}),(0,n.jsx)("input",{id:"weight_kg",name:"weight_kg",type:"number",step:"0.1",className:"form-control",value:v.weight_kg,onChange:K,min:"0"})]}),(0,n.jsxs)("div",{className:"col-md-4",children:[(0,n.jsx)("label",{htmlFor:"height_cm",className:"form-label",children:e("profile.fields.height")}),(0,n.jsx)("input",{id:"height_cm",name:"height_cm",type:"number",step:"0.1",className:"form-control",value:v.height_cm,onChange:K,min:"0"})]}),(0,n.jsxs)("div",{className:"col-md-4",children:[(0,n.jsx)("label",{htmlFor:"age_years",className:"form-label",children:e("profile.fields.age")}),(0,n.jsx)("input",{id:"age_years",name:"age_years",type:"number",className:"form-control",value:v.age_years,onChange:K,min:"0",max:"120"})]})]}),(0,n.jsxs)("div",{className:"row g-3 mt-1",children:[(0,n.jsxs)("div",{className:"col-md-4",children:[(0,n.jsx)("label",{htmlFor:"sex",className:"form-label",children:e("profile.fields.sex")}),(0,n.jsx)("select",{id:"sex",name:"sex",className:"form-select",value:v.sex,onChange:K,children:d.map(l=>(0,n.jsx)("option",{value:l.value,children:e(l.labelKey)},l.value))})]}),(0,n.jsxs)("div",{className:"col-md-4",children:[(0,n.jsx)("label",{htmlFor:"activity_level",className:"form-label",children:e("profile.fields.activity")}),(0,n.jsxs)("select",{id:"activity_level",name:"activity_level",className:"form-select",value:v.activity_level,onChange:K,children:[(0,n.jsx)("option",{value:"",children:e("profile.activity.select")}),m.map(l=>(0,n.jsx)("option",{value:l.value,children:e(l.labelKey)},l.value))]})]}),(0,n.jsxs)("div",{className:"col-md-4",children:[(0,n.jsx)("label",{htmlFor:"primary_goal",className:"form-label",children:e("profile.fields.goal")}),(0,n.jsxs)("select",{id:"primary_goal",name:"primary_goal",className:"form-select",value:v.primary_goal,onChange:K,children:[(0,n.jsx)("option",{value:"",children:e("profile.goal.select")}),h.map(l=>(0,n.jsx)("option",{value:l.value,children:e(l.labelKey)},l.value))]})]})]}),(0,n.jsxs)("div",{className:"mt-3",children:[(0,n.jsx)("label",{htmlFor:"allergies",className:"form-label",children:e("profile.fields.allergies")}),(0,n.jsx)("textarea",{id:"allergies",name:"allergies",rows:2,className:"form-control",value:v.allergies,onChange:K,placeholder:e("profile.placeholders.allergies")})]}),(0,n.jsxs)("div",{className:"mt-3",children:[(0,n.jsx)("label",{htmlFor:"medical_conditions",className:"form-label",children:e("profile.fields.medical")}),(0,n.jsx)("textarea",{id:"medical_conditions",name:"medical_conditions",rows:2,className:"form-control",value:v.medical_conditions,onChange:K,placeholder:e("profile.placeholders.medical")})]}),(0,n.jsxs)("div",{className:"mt-3",children:[(0,n.jsx)("label",{htmlFor:"notes",className:"form-label",children:e("profile.fields.notes")}),(0,n.jsx)("textarea",{id:"notes",name:"notes",rows:3,className:"form-control",value:v.notes,onChange:K,placeholder:e("profile.placeholders.notes")})]}),w&&(0,n.jsx)("div",{className:"profile-bmi card border-0 shadow-sm mt-3",children:(0,n.jsxs)("div",{className:"card-body d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"mb-1 text-muted text-uppercase small",children:e("profile.stats.bmiLabel")}),(0,n.jsx)("p",{className:"display-6 fw-bold mb-0",children:w})]}),(0,n.jsx)("p",{className:"mb-0 text-muted",children:e("profile.stats.bmiNote")})]})})]}),(0,n.jsxs)("div",{className:"card-footer d-flex justify-content-between align-items-center",children:[(0,n.jsx)("div",{children:(0,n.jsx)("small",{className:"text-muted",children:e("profile.helper.notice")})}),(0,n.jsx)("button",{type:"submit",className:"btn btn-dark",disabled:"saving"===x||c.loading,children:"saving"===x||c.loading?e("profile.actions.saving"):e("profile.actions.save")})]})]})]})})}):(0,n.jsx)("main",{className:"profile-page container py-5",children:(0,n.jsx)("div",{className:"row justify-content-center",children:(0,n.jsx)("div",{className:"col-lg-6",children:(0,n.jsxs)("div",{className:"alert alert-warning",children:[e("profile.messages.authRequired"),(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)(r.N_,{className:"btn btn-dark",to:"/login",children:e("profile.messages.authButton")})})]})})})})}}}]);
//# sourceMappingURL=955.b74161c7.chunk.js.map
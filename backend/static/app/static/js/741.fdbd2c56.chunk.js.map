{"version":3,"file":"static/js/741.fdbd2c56.chunk.js","mappings":"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","sources":["pages/ChatPage.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport Chatbot from \"../Chatbot\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport \"../styles/ChatPage.css\";\r\n\r\nexport default function ChatPage() {\r\n  const { isAuthenticated } = useAuth();\r\n  const [chatHistory, setChatHistory] = useState([]);\r\n\r\n  // Cargar historial de chats del localStorage\r\n  useEffect(() => {\r\n    const loadHistory = () => {\r\n      const saved = localStorage.getItem(\"fitter_chat_history\");\r\n      if (saved) {\r\n        try {\r\n          const parsed = JSON.parse(saved);\r\n          setChatHistory(parsed);\r\n        } catch (e) {\r\n          console.error(\"Error loading chat history:\", e);\r\n        }\r\n      }\r\n    };\r\n    loadHistory();\r\n  }, []);\r\n\r\n  return (\r\n    <main className=\"chat-page\">\r\n      <div className=\"container-fluid h-100\">\r\n        <div className=\"row h-100\">\r\n          {/* Sidebar con historial */}\r\n          <div className=\"col-md-3 chat-sidebar\">\r\n            <div className=\"sidebar-header\">\r\n              <h2 className=\"h5 mb-0\">\r\n                <i className=\"fa-solid fa-message me-2\" aria-hidden=\"true\" />\r\n                Historial de Chats\r\n              </h2>\r\n            </div>\r\n            <div className=\"sidebar-content\">\r\n              {chatHistory.length === 0 ? (\r\n                <div className=\"text-muted text-center py-4\">\r\n                  <i className=\"fa-solid fa-comments fa-3x mb-3 opacity-25\" aria-hidden=\"true\" />\r\n                  <p>No hay conversaciones previas</p>\r\n                  <small>Inicia una conversación para ver el historial</small>\r\n                </div>\r\n              ) : (\r\n                <div className=\"chat-history-list\">\r\n                  {chatHistory.map((chat, idx) => (\r\n                    <div key={idx} className=\"chat-history-item\">\r\n                      <div className=\"chat-date\">\r\n                        <i className=\"fa-solid fa-clock me-2\" aria-hidden=\"true\" />\r\n                        {new Date(chat.timestamp).toLocaleDateString(\"es-CL\", {\r\n                          day: \"2-digit\",\r\n                          month: \"short\",\r\n                          year: \"numeric\",\r\n                          hour: \"2-digit\",\r\n                          minute: \"2-digit\",\r\n                        })}\r\n                      </div>\r\n                      <div className=\"chat-preview\">{chat.preview || \"Conversación\"}</div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Panel principal del chat */}\r\n          <div className=\"col-md-9 chat-main\">\r\n            <div className=\"chat-header\">\r\n              <div className=\"d-flex align-items-center\">\r\n                <img\r\n                  src=\"/fitter_logo.png\"\r\n                  alt=\"Fitter Assistant\"\r\n                  className=\"chat-avatar me-3\"\r\n                />\r\n                <div>\r\n                  <h1 className=\"h4 mb-0\">Asistente Virtual Fitter</h1>\r\n                  <p className=\"text-muted small mb-0\">\r\n                    <i className=\"fa-solid fa-circle text-success me-2\" aria-hidden=\"true\" />\r\n                    En línea · Siempre disponible\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"chat-container\">\r\n              <div className=\"welcome-banner mb-4\">\r\n                <h3>\r\n                  <i className=\"fa-solid fa-robot me-2\" aria-hidden=\"true\" />\r\n                  ¡Hola{isAuthenticated ? \"\" : \" visitante\"}!\r\n                </h3>\r\n                <p className=\"mb-2\">\r\n                  Soy tu asistente virtual de Fitter. Puedo ayudarte con:\r\n                </p>\r\n                <div className=\"capabilities-grid\">\r\n                  <div className=\"capability-item\">\r\n                    <i className=\"fa-solid fa-dumbbell\" aria-hidden=\"true\" />\r\n                    <span>Rutinas personalizadas</span>\r\n                  </div>\r\n                  <div className=\"capability-item\">\r\n                    <i className=\"fa-solid fa-utensils\" aria-hidden=\"true\" />\r\n                    <span>Planes nutricionales</span>\r\n                  </div>\r\n                  <div className=\"capability-item\">\r\n                    <i className=\"fa-solid fa-user-circle\" aria-hidden=\"true\" />\r\n                    <span>Gestión de perfil</span>\r\n                  </div>\r\n                  <div className=\"capability-item\">\r\n                    <i className=\"fa-solid fa-calendar-check\" aria-hidden=\"true\" />\r\n                    <span>Consulta de reservas</span>\r\n                  </div>\r\n                  <div className=\"capability-item\">\r\n                    <i className=\"fa-solid fa-question-circle\" aria-hidden=\"true\" />\r\n                    <span>Soporte general</span>\r\n                  </div>\r\n                  <div className=\"capability-item\">\r\n                    <i className=\"fa-solid fa-shield-halved\" aria-hidden=\"true\" />\r\n                    <span>Ayuda con MFA</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <Chatbot\r\n                onNewMessage={(msg) => {\r\n                  // Guardar en historial cuando hay un mensaje nuevo\r\n                  const newHistory = [\r\n                    {\r\n                      timestamp: new Date().toISOString(),\r\n                      preview: msg.substring(0, 50),\r\n                    },\r\n                    ...chatHistory.slice(0, 19), // Máximo 20 chats\r\n                  ];\r\n                  setChatHistory(newHistory);\r\n                  localStorage.setItem(\"fitter_chat_history\", JSON.stringify(newHistory));\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":["ChatPage","isAuthenticated","useAuth","chatHistory","setChatHistory","useState","useEffect","loadHistory","saved","localStorage","getItem","parsed","JSON","parse","e","console","error","_jsx","className","children","_jsxs","length","map","chat","idx","Date","timestamp","toLocaleDateString","day","month","year","hour","minute","preview","src","alt","Chatbot","onNewMessage","msg","newHistory","toISOString","substring","slice","setItem","stringify"],"sourceRoot":""}
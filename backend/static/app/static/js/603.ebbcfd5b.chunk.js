"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[603],{326:(e,s,a)=>{a.d(s,{A:()=>t});const r=new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0,maximumFractionDigits:0}),t=e=>{if(null===e||void 0===e)return r.format(0);const s="number"===typeof e?e:Number.parseFloat(e);if(!Number.isFinite(s))return r.format(0);const a=Math.round(s);return r.format(a)}},603:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var r=a(43),t=a(352),i=a(462),c=a(326),n=a(640),l=a(579);const o=e=>{const s=Number(e);return Number.isFinite(s)?s:0};function d(){const{id:e}=(0,t.g)(),[s,a]=(0,r.useState)(null),[d,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(!0),[h,g]=(0,r.useState)([]),[x,j]=(0,r.useState)(""),[b,N]=(0,r.useState)(!1),[_,v]=(0,r.useState)(0),{addItem:y}=(0,n._)();(0,r.useEffect)(()=>{v(0);let s=!0;return p(!0),i.n.productos.get(e).then(e=>{s&&(a(e),u(""))}).catch(e=>{s&&u(e.message)}).finally(()=>{s&&p(!1)}),()=>{s=!1}},[e]),(0,r.useEffect)(()=>{if(!s)return void g([]);let e=!0;return i.n.productos.list("").then(a=>{if(!e)return;const r=(Array.isArray(a)?a:[]).filter(e=>e.id!==s.id).filter(e=>!s.categoria||e.categoria===s.categoria).slice(0,8);g(r),j("")}).catch(s=>{e&&(g([]),j(s.message||"No se pudieron cargar productos relacionados."))}),()=>{e=!1}},[s]);const f=o(null===s||void 0===s?void 0:s.stock),k=f<=0,A=(null===s||void 0===s?void 0:s.imagen_url)||"/fitter_logo.png",C=(0,r.useMemo)(()=>Array.isArray(null===s||void 0===s?void 0:s.gallery)&&s.gallery.length>0?s.gallery:[A],[s,A]),S=(0,r.useMemo)(()=>{const e=null===s||void 0===s?void 0:s.descripcion;return e?b||e.length<320?e:"".concat(e.slice(0,320),"\u2026"):"Sin descripci\xf3n adicional."},[s,b]),F=(0,r.useMemo)(()=>{const e=[];return e.push({label:"Categor\xeda",value:(null===s||void 0===s?void 0:s.categoria)||"\u2014"}),e.push({label:"C\xf3digo",value:s?"#".concat(s.id):"\u2014"}),e.push({label:"Disponibilidad",value:f>0?"".concat(f," unidades"):"Sin stock"}),e.push({label:"Precio",value:(0,c.A)((null===s||void 0===s?void 0:s.precio)||0)}),null!==s&&void 0!==s&&s.brand&&e.unshift({label:"Marca",value:s.brand}),Array.isArray(null===s||void 0===s?void 0:s.specifications)&&s.specifications.forEach(s=>{var a,r,t;s&&s.label&&e.push({label:s.label,value:null!==(a=null!==(r=null!==(t=s.value)&&void 0!==t?t:s.descripcion)&&void 0!==r?r:s.detail)&&void 0!==a?a:"\u2014"})}),e},[s,f]);return d?(0,l.jsx)("main",{className:"product-detail-page",children:(0,l.jsxs)("div",{className:"container text-danger py-5",children:["Error: ",d]})}):m||!s?(0,l.jsx)("main",{className:"product-detail-page",children:(0,l.jsx)("div",{className:"container py-5",children:"Cargando\u2026"})}):(0,l.jsx)("main",{className:"product-detail-page",children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsxs)("nav",{className:"product-breadcrumb",children:[(0,l.jsx)(t.N_,{to:"/",children:"Inicio"}),s.categoria&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:"/"}),(0,l.jsx)(t.N_,{to:"/catalogo?categoria=".concat(encodeURIComponent(s.categoria)),children:s.categoria})]}),(0,l.jsx)("span",{children:"/"}),(0,l.jsx)("span",{className:"product-breadcrumb__current",children:s.nombre})]}),(0,l.jsxs)("div",{className:"product-detail-grid",children:[(0,l.jsxs)("section",{className:"product-gallery",children:[(0,l.jsx)("div",{className:"product-gallery__main",children:(0,l.jsx)("img",{src:C[_]||A,alt:s.nombre})}),C.length>1&&(0,l.jsx)("div",{className:"product-gallery__thumbnails",children:C.map((e,a)=>(0,l.jsx)("button",{type:"button",className:"product-gallery__thumb ".concat(a===_?"product-gallery__thumb--active":""),onClick:()=>v(a),children:(0,l.jsx)("img",{src:e,alt:"".concat(s.nombre," vista ").concat(a+1)})},e||a))})]}),(0,l.jsxs)("section",{className:"product-summary",children:[(0,l.jsx)("small",{className:"product-summary__brand",children:s.brand||s.categoria||"Producto Fitter"}),(0,l.jsx)("h1",{children:s.nombre}),s.rating&&(0,l.jsxs)("div",{className:"product-summary__rating",children:[(0,l.jsxs)("span",{className:"product-summary__rating-stars",children:["\u2605".repeat(Math.round(s.rating)),s.rating<5?"\u2606".repeat(5-Math.round(s.rating)):""]}),(0,l.jsxs)("span",{children:[Number(s.rating).toFixed(1)," / 5"]}),s.rating_count?(0,l.jsxs)("span",{className:"text-muted",children:["(",s.rating_count," opiniones)"]}):null]}),(0,l.jsxs)("div",{className:"product-summary__price",children:[(0,l.jsx)("span",{className:"product-summary__amount",children:(0,c.A)(s.precio)}),(0,l.jsx)("span",{className:"product-summary__stock ".concat(k?"product-summary__stock--empty":""),children:k?"Sin stock disponible":"".concat(f," unidades listas para env\xedo")})]}),(0,l.jsx)("p",{className:"product-summary__description",children:S}),s.descripcion&&s.descripcion.length>320&&(0,l.jsx)("button",{type:"button",className:"btn btn-link p-0",onClick:()=>N(e=>!e),children:b?"Ver menos":"Ver descripci\xf3n completa"}),Array.isArray(s.highlights)&&s.highlights.length>0&&(0,l.jsx)("ul",{className:"product-summary__highlights",children:s.highlights.map((e,s)=>(0,l.jsx)("li",{children:e},s))}),(0,l.jsxs)("div",{className:"product-summary__actions",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-dark btn-lg",disabled:k,onClick:()=>{k||(async()=>{if(s)try{await y(s.id)}catch(e){alert(e.message)}})()},children:k?"No disponible":"Agregar al carrito"}),(0,l.jsx)(t.N_,{to:"/carrito",className:"btn btn-outline-secondary btn-lg",children:"Ir al carrito"})]}),(0,l.jsxs)("div",{className:"product-summary__info",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Entrega r\xe1pida"}),(0,l.jsx)("p",{className:"text-muted mb-0",children:"Disponibilidad inmediata para retiro o env\xedo."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Pago seguro"}),(0,l.jsx)("p",{className:"text-muted mb-0",children:"Protegemos tus datos con m\xe9todos de pago seguros."})]})]})]})]}),(0,l.jsxs)("section",{className:"product-details",children:[(0,l.jsxs)("div",{className:"product-specs",children:[(0,l.jsx)("h2",{children:"Especificaciones"}),(0,l.jsx)("dl",{children:F.map(e=>(0,l.jsxs)("div",{className:"product-specs__row",children:[(0,l.jsx)("dt",{children:e.label}),(0,l.jsx)("dd",{children:e.value})]},e.label))})]}),(0,l.jsxs)("div",{className:"product-description",children:[(0,l.jsx)("h2",{children:"Informaci\xf3n adicional"}),(0,l.jsx)("p",{children:s.descripcion||"No se proporcion\xf3 informaci\xf3n adicional para este producto."})]})]}),(0,l.jsxs)("section",{className:"product-related",children:[(0,l.jsxs)("header",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,l.jsx)("h3",{children:"Tal vez te interese"}),(0,l.jsx)(t.N_,{to:"/catalogo",className:"btn btn-link",children:"Ver todo el cat\xe1logo"})]}),x&&(0,l.jsx)("div",{className:"alert alert-warning",children:x}),!x&&0===h.length&&(0,l.jsx)("p",{className:"text-muted",children:"No encontramos productos similares por ahora."}),(0,l.jsx)("div",{className:"product-related__grid",children:h.map(e=>{const s=o(e.stock);return(0,l.jsxs)("article",{className:"product-related__card",children:[(0,l.jsxs)(t.N_,{to:"/producto/".concat(e.id),children:[(0,l.jsx)("img",{src:e.imagen_url||"/fitter_logo.png",alt:e.nombre}),(0,l.jsx)("h4",{children:e.nombre})]}),(0,l.jsx)("span",{className:"product-related__price",children:(0,c.A)(e.precio)}),(0,l.jsx)("span",{className:"product-related__stock",children:s>0?"".concat(s," disponibles"):"Sin stock"}),(0,l.jsx)("button",{type:"button",className:"btn btn-outline-dark btn-sm",disabled:s<=0,onClick:()=>(async e=>{try{await y(e)}catch(s){alert(s.message)}})(e.id),children:"A\xf1adir"})]},e.id)})})]})]})})}}}]);
//# sourceMappingURL=603.ebbcfd5b.chunk.js.map
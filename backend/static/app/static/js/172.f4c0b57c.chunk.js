"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[172],{172:(e,r,t)=>{t.r(r),t.d(r,{default:()=>u});var s=t(555),c=t(43),a=t(352),n=t(462),i=t(528),o=t(579);const l=["Membership","Personal Training","Supplements","Merchandise"],d=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const t=Number(e);return Number.isFinite(t)?t:r};function u(){const e=(0,a.Zp)(),{id:r}=(0,a.g)(),t=Boolean(r),{isAdmin:u,initialized:p,refresh:m}=(0,i.A)(),[h,x]=(0,c.useState)({nombre:"",precio:0,descripcion:"",categoria:l[0],stock:0}),[j,b]=(0,c.useState)(""),[g,f]=(0,c.useState)(null),[v,N]=(0,c.useState)(null),[w,A]=(0,c.useState)(t);(0,c.useEffect)(()=>{p?u||e("/login"):m().catch(()=>{})},[p,u,e,m]),(0,c.useEffect)(()=>{if(!t)return;let e=!0;return A(!0),n.n.productos.get(r).then(r=>{e&&(x({nombre:r.nombre||"",precio:d(r.precio,0),descripcion:r.descripcion||"",categoria:r.categoria||l[0],stock:d(r.stock,0)}),r.imagen_url&&N(r.imagen_url))}).catch(r=>{e&&b(r.message)}).finally(()=>{e&&A(!1)}),()=>{e=!1}},[r,t]);const k=t?"Editar Producto/Servicio":"A\xf1adir Producto/Servicio";return(0,o.jsxs)("div",{className:"container mt-5 mb-5",children:[(0,o.jsx)("h1",{className:"text-center mb-5",children:k}),w?(0,o.jsx)("div",{className:"alert alert-info",children:"Cargando..."}):(0,o.jsxs)("form",{onSubmit:async c=>{c.preventDefault(),b("");try{const c=(0,s.A)({},h);if(g){const e=new FormData;e.append("nombre",c.nombre),e.append("precio",c.precio),e.append("descripcion",c.descripcion||""),e.append("categoria",c.categoria||""),e.append("stock",c.stock||0),e.append("imagen",g,g.name),t?await n.n.productos.update(r,e):await n.n.productos.create(e)}else t?await n.n.productos.update(r,c):await n.n.productos.create(c);e("/admin/productos")}catch(a){b(a.message)}},className:"producto-form mb-5",children:[(0,o.jsx)("div",{className:"table-responsive",children:(0,o.jsx)("table",{className:"table table-bordered producto-form-table",children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"row",children:"Nombre"}),(0,o.jsx)("td",{children:(0,o.jsx)("input",{className:"form-control",value:h.nombre,onChange:e=>x((0,s.A)((0,s.A)({},h),{},{nombre:e.target.value})),required:!0})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"row",children:"Precio"}),(0,o.jsx)("td",{children:(0,o.jsx)("input",{className:"form-control",type:"number",step:"0.01",value:h.precio,onChange:e=>x((0,s.A)((0,s.A)({},h),{},{precio:d(e.target.value,0)})),required:!0})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"row",children:"Descripci\xf3n"}),(0,o.jsx)("td",{children:(0,o.jsx)("textarea",{className:"form-control",value:h.descripcion,onChange:e=>x((0,s.A)((0,s.A)({},h),{},{descripcion:e.target.value}))})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"row",children:"Categor\xeda"}),(0,o.jsx)("td",{children:(0,o.jsx)("select",{className:"form-control",value:h.categoria,onChange:e=>x((0,s.A)((0,s.A)({},h),{},{categoria:e.target.value})),children:l.map(e=>(0,o.jsx)("option",{value:e,children:e},e))})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"row",children:"Stock"}),(0,o.jsx)("td",{children:(0,o.jsx)("input",{className:"form-control",type:"number",value:h.stock,onChange:e=>x((0,s.A)((0,s.A)({},h),{},{stock:d(e.target.value,0)})),required:!0})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"row",children:"Imagen"}),(0,o.jsx)("td",{children:(0,o.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const r=e.target.files&&e.target.files[0];if(f(r||null),r){const e=URL.createObjectURL(r);N(e)}else N(null)},className:"form-control"})})]})]})})}),j&&(0,o.jsx)("div",{className:"alert alert-danger",children:j}),v&&(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("h5",{children:"Previsualizaci\xf3n"}),(0,o.jsx)("div",{className:"preview-container p-3 border rounded",children:(0,o.jsx)("img",{src:v,alt:"Previsualizaci\xf3n del producto",style:{maxWidth:200,maxHeight:200,objectFit:"contain"}})})]}),(0,o.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,o.jsx)(a.N_,{to:"/admin/productos",className:"btn btn-secondary",children:"Volver"}),(0,o.jsx)("button",{type:"submit",className:"btn btn-success",children:"Guardar"})]})]})]})}}}]);
//# sourceMappingURL=172.f4c0b57c.chunk.js.map